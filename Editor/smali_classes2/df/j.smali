.class public final Ldf/j;
.super Ljava/lang/Object;
.source ""


# annotations
.annotation runtime Lkotlin/Metadata;
    bv = {}
    d1 = {
        "\u0000Z\n\u0002\u0018\u0002\n\u0002\u0010\u0000\n\u0002\u0018\u0002\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\u0008\u0004\n\u0002\u0010$\n\u0002\u0010\u000e\n\u0002\u0008\u0004\n\u0002\u0018\u0002\n\u0002\u0008\u0004\n\u0002\u0018\u0002\n\u0002\u0008\u0004\n\u0002\u0018\u0002\n\u0002\u0008\u0004\n\u0002\u0018\u0002\n\u0002\u0008\u0004\n\u0002\u0010\t\n\u0000\n\u0002\u0018\u0002\n\u0000\n\u0002\u0018\u0002\n\u0002\u0008\u0004\u0018\u00002\u00020\u0001B[\u0012\u0006\u0010\u0006\u001a\u00020\u0005\u0012\u0012\u0010\u000c\u001a\u000e\u0012\u0004\u0012\u00020\u000b\u0012\u0004\u0012\u00020\u000b0\n\u0012\u0006\u0010%\u001a\u00020$\u0012\u0006\u0010\u0011\u001a\u00020\u0010\u0012\u0006\u0010\u0016\u001a\u00020\u0015\u0012\u0006\u0010\'\u001a\u00020&\u0012\u0006\u0010)\u001a\u00020(\u0012\u0006\u0010\u001b\u001a\u00020\u001a\u0012\u0006\u0010 \u001a\u00020\u001f\u00a2\u0006\u0004\u0008*\u0010+J\u000c\u0010\u0004\u001a\u0008\u0012\u0004\u0012\u00020\u00030\u0002R\u0017\u0010\u0006\u001a\u00020\u00058\u0006\u00a2\u0006\u000c\n\u0004\u0008\u0006\u0010\u0007\u001a\u0004\u0008\u0008\u0010\tR#\u0010\u000c\u001a\u000e\u0012\u0004\u0012\u00020\u000b\u0012\u0004\u0012\u00020\u000b0\n8\u0006\u00a2\u0006\u000c\n\u0004\u0008\u000c\u0010\r\u001a\u0004\u0008\u000e\u0010\u000fR\u0017\u0010\u0011\u001a\u00020\u00108\u0006\u00a2\u0006\u000c\n\u0004\u0008\u0011\u0010\u0012\u001a\u0004\u0008\u0013\u0010\u0014R\u0017\u0010\u0016\u001a\u00020\u00158\u0006\u00a2\u0006\u000c\n\u0004\u0008\u0016\u0010\u0017\u001a\u0004\u0008\u0018\u0010\u0019R\u0017\u0010\u001b\u001a\u00020\u001a8\u0006\u00a2\u0006\u000c\n\u0004\u0008\u001b\u0010\u001c\u001a\u0004\u0008\u001d\u0010\u001eR\u0017\u0010 \u001a\u00020\u001f8\u0006\u00a2\u0006\u000c\n\u0004\u0008 \u0010!\u001a\u0004\u0008\"\u0010#\u00a8\u0006,"
    }
    d2 = {
        "Ldf/j;",
        "",
        "Lhh/h;",
        "Lcom/miui/mediaeditor/download/Progress;",
        "o",
        "Ldf/a;",
        "task",
        "Ldf/a;",
        "m",
        "()Ldf/a;",
        "",
        "",
        "header",
        "Ljava/util/Map;",
        "k",
        "()Ljava/util/Map;",
        "Lze/b;",
        "dispatcher",
        "Lze/b;",
        "i",
        "()Lze/b;",
        "Lcf/a;",
        "getRequest",
        "Lcf/a;",
        "j",
        "()Lcf/a;",
        "Lgf/b;",
        "watcher",
        "Lgf/b;",
        "n",
        "()Lgf/b;",
        "Lbf/b;",
        "logger",
        "Lbf/b;",
        "l",
        "()Lbf/b;",
        "",
        "rangeSize",
        "Lye/a;",
        "priorityScheduler",
        "Laf/a;",
        "retryConfig",
        "<init>",
        "(Ldf/a;Ljava/util/Map;JLze/b;Lcf/a;Lye/a;Laf/a;Lgf/b;Lbf/b;)V",
        "download_release"
    }
    k = 0x1
    mv = {
        0x1,
        0x5,
        0x1
    }
.end annotation


# instance fields
.field public final a:Ldf/a;

.field public final b:Ljava/util/Map;
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "Ljava/util/Map<",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            ">;"
        }
    .end annotation
.end field

.field public final c:J

.field public final d:Lze/b;

.field public final e:Lcf/a;

.field public final f:Lye/a;

.field public final g:Laf/a;

.field public final h:Lgf/b;

.field public final i:Lbf/b;

.field public final j:Lhh/n;


# direct methods
.method public constructor <init>(Ldf/a;Ljava/util/Map;JLze/b;Lcf/a;Lye/a;Laf/a;Lgf/b;Lbf/b;)V
    .locals 1
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "(",
            "Ldf/a;",
            "Ljava/util/Map<",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            ">;J",
            "Lze/b;",
            "Lcf/a;",
            "Lye/a;",
            "Laf/a;",
            "Lgf/b;",
            "Lbf/b;",
            ")V"
        }
    .end annotation

    const-string v0, "task"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "header"

    invoke-static {p2, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "dispatcher"

    invoke-static {p5, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "getRequest"

    invoke-static {p6, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "priorityScheduler"

    invoke-static {p7, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "retryConfig"

    invoke-static {p8, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "watcher"

    invoke-static {p9, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "logger"

    invoke-static {p10, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    invoke-direct {p0}, Ljava/lang/Object;-><init>()V

    .line 2
    iput-object p1, p0, Ldf/j;->a:Ldf/a;

    .line 3
    iput-object p2, p0, Ldf/j;->b:Ljava/util/Map;

    .line 4
    iput-wide p3, p0, Ldf/j;->c:J

    .line 5
    iput-object p5, p0, Ldf/j;->d:Lze/b;

    .line 6
    iput-object p6, p0, Ldf/j;->e:Lcf/a;

    .line 7
    iput-object p7, p0, Ldf/j;->f:Lye/a;

    .line 8
    iput-object p8, p0, Ldf/j;->g:Laf/a;

    .line 9
    iput-object p9, p0, Ldf/j;->h:Lgf/b;

    .line 10
    iput-object p10, p0, Ldf/j;->i:Lbf/b;

    .line 11
    invoke-virtual {p1}, Ldf/a;->a()I

    move-result p1

    invoke-virtual {p7, p1}, Lye/a;->e(I)Lhh/n;

    move-result-object p1

    const-string p2, "priorityScheduler.priority(task.priority)"

    invoke-static {p1, p2}, Lri/h;->e(Ljava/lang/Object;Ljava/lang/String;)V

    iput-object p1, p0, Ldf/j;->j:Lhh/n;

    return-void
.end method

.method public static synthetic a(Ljava/util/concurrent/atomic/AtomicInteger;Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Ljava/lang/Throwable;)Lhh/l;
    .locals 0

    invoke-static {p0, p1, p2, p3}, Ldf/j;->t(Ljava/util/concurrent/atomic/AtomicInteger;Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Ljava/lang/Throwable;)Lhh/l;

    move-result-object p0

    return-object p0
.end method

.method public static synthetic b(Ldf/j;Ljava/lang/Throwable;)V
    .locals 0

    invoke-static {p0, p1}, Ldf/j;->u(Ldf/j;Ljava/lang/Throwable;)V

    return-void
.end method

.method public static synthetic c(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lkotlin/jvm/internal/Ref$LongRef;Lfo/a0;)V
    .locals 0

    invoke-static {p0, p1, p2, p3}, Ldf/j;->q(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lkotlin/jvm/internal/Ref$LongRef;Lfo/a0;)V

    return-void
.end method

.method public static synthetic d(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lhh/h;)Lhh/l;
    .locals 0

    invoke-static {p0, p1, p2}, Ldf/j;->s(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lhh/h;)Lhh/l;

    move-result-object p0

    return-object p0
.end method

.method public static synthetic e(Ldf/j;Lfo/a0;)Lhh/l;
    .locals 0

    invoke-static {p0, p1}, Ldf/j;->r(Ldf/j;Lfo/a0;)Lhh/l;

    move-result-object p0

    return-object p0
.end method

.method public static synthetic f(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Lkotlin/jvm/internal/Ref$LongRef;)V
    .locals 0

    invoke-static {p0, p1, p2}, Ldf/j;->v(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Lkotlin/jvm/internal/Ref$LongRef;)V

    return-void
.end method

.method public static synthetic g(Lkotlin/jvm/internal/Ref$BooleanRef;Ldf/j;)V
    .locals 0

    invoke-static {p0, p1}, Ldf/j;->w(Lkotlin/jvm/internal/Ref$BooleanRef;Ldf/j;)V

    return-void
.end method

.method public static synthetic h(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Ldf/a;)Lhh/l;
    .locals 0

    invoke-static {p0, p1, p2}, Ldf/j;->p(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Ldf/a;)Lhh/l;

    move-result-object p0

    return-object p0
.end method

.method public static final p(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Ldf/a;)Lhh/l;
    .locals 2

    const-string v0, "$startTime"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "this$0"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "it"

    invoke-static {p2, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J

    move-result-wide v0

    iput-wide v0, p0, Lkotlin/jvm/internal/Ref$LongRef;->element:J

    .line 2
    invoke-virtual {p1}, Ldf/j;->j()Lcf/a;

    move-result-object p0

    invoke-virtual {p1}, Ldf/j;->m()Ldf/a;

    move-result-object p2

    invoke-virtual {p2}, Ldf/a;->d()Ljava/lang/String;

    move-result-object p2

    invoke-virtual {p1}, Ldf/j;->k()Ljava/util/Map;

    move-result-object p1

    invoke-interface {p0, p2, p1}, Lcf/a;->a(Ljava/lang/String;Ljava/util/Map;)Lhh/h;

    move-result-object p0

    return-object p0
.end method

.method public static final q(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lkotlin/jvm/internal/Ref$LongRef;Lfo/a0;)V
    .locals 2

    const-string v0, "this$0"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "$watchFlag"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "$totalLength"

    invoke-static {p2, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    invoke-virtual {p3}, Lfo/a0;->N()Z

    move-result v0

    const-string v1, "it"

    if-nez v0, :cond_2

    .line 2
    invoke-static {p3, v1}, Lri/h;->e(Ljava/lang/Object;Ljava/lang/String;)V

    invoke-static {p3}, Lef/a;->e(Lfo/a0;)Z

    move-result p0

    if-nez p0, :cond_1

    .line 3
    invoke-static {p3}, Lef/a;->d(Lfo/a0;)Z

    move-result p0

    if-eqz p0, :cond_0

    .line 4
    new-instance p0, Lcom/miui/mediaeditor/download/exception/DownloadException;

    sget-object p1, Lcom/miui/mediaeditor/download/exception/DownloadException$a$c;->a:Lcom/miui/mediaeditor/download/exception/DownloadException$a$c;

    const-string p2, "request server error"

    invoke-direct {p0, p2, p1}, Lcom/miui/mediaeditor/download/exception/DownloadException;-><init>(Ljava/lang/String;Lcom/miui/mediaeditor/download/exception/DownloadException$a;)V

    throw p0

    .line 5
    :cond_0
    new-instance p0, Lcom/miui/mediaeditor/download/exception/DownloadException;

    sget-object p1, Lcom/miui/mediaeditor/download/exception/DownloadException$a$b;->a:Lcom/miui/mediaeditor/download/exception/DownloadException$a$b;

    const-string p2, "request failed!"

    invoke-direct {p0, p2, p1}, Lcom/miui/mediaeditor/download/exception/DownloadException;-><init>(Ljava/lang/String;Lcom/miui/mediaeditor/download/exception/DownloadException$a;)V

    throw p0

    .line 6
    :cond_1
    new-instance p0, Lcom/miui/mediaeditor/download/exception/DownloadException;

    sget-object p1, Lcom/miui/mediaeditor/download/exception/DownloadException$a$d;->a:Lcom/miui/mediaeditor/download/exception/DownloadException$a$d;

    const-string p2, "request time out, worth to retry"

    invoke-direct {p0, p2, p1}, Lcom/miui/mediaeditor/download/exception/DownloadException;-><init>(Ljava/lang/String;Lcom/miui/mediaeditor/download/exception/DownloadException$a;)V

    throw p0

    .line 7
    :cond_2
    :try_start_0
    invoke-virtual {p0}, Ldf/j;->n()Lgf/b;

    move-result-object v0

    invoke-interface {v0, p0}, Lgf/b;->a(Ldf/j;)V

    const/4 v0, 0x1

    .line 8
    iput-boolean v0, p1, Lkotlin/jvm/internal/Ref$BooleanRef;->element:Z
    :try_end_0
    .catchall {:try_start_0 .. :try_end_0} :catchall_0

    .line 9
    invoke-static {p3, v1}, Lri/h;->e(Ljava/lang/Object;Ljava/lang/String;)V

    invoke-static {p3}, Lef/a;->a(Lfo/a0;)J

    move-result-wide p0

    iput-wide p0, p2, Lkotlin/jvm/internal/Ref$LongRef;->element:J

    return-void

    :catchall_0
    move-exception p1

    .line 10
    invoke-virtual {p0}, Ldf/j;->l()Lbf/b;

    move-result-object p2

    invoke-virtual {p0}, Ldf/j;->m()Ldf/a;

    move-result-object p0

    invoke-virtual {p0}, Ldf/a;->c()Ljava/lang/String;

    move-result-object p0

    const-string p3, "watcher catch throwable"

    invoke-interface {p2, p0, p3, p1}, Lbf/b;->b(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V

    .line 11
    throw p1
.end method

.method public static final r(Ldf/j;Lfo/a0;)Lhh/l;
    .locals 2

    const-string v0, "this$0"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "it"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    invoke-virtual {p0}, Ldf/j;->i()Lze/b;

    move-result-object v0

    invoke-virtual {p0}, Ldf/j;->m()Ldf/a;

    move-result-object v1

    invoke-interface {v0, v1, p1}, Lze/b;->a(Ldf/a;Lfo/a0;)Lze/c;

    move-result-object v0

    invoke-interface {v0, p0, p1}, Lze/c;->a(Ldf/j;Lfo/a0;)Lhh/h;

    move-result-object p0

    return-object p0
.end method

.method public static final s(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lhh/h;)Lhh/l;
    .locals 2

    const-string v0, "this$0"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "$watchFlag"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "it"

    invoke-static {p2, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    new-instance v0, Ljava/util/concurrent/atomic/AtomicInteger;

    invoke-direct {v0}, Ljava/util/concurrent/atomic/AtomicInteger;-><init>()V

    .line 2
    new-instance v1, Ldf/h;

    invoke-direct {v1, v0, p0, p1}, Ldf/h;-><init>(Ljava/util/concurrent/atomic/AtomicInteger;Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;)V

    invoke-virtual {p2, v1}, Lhh/h;->y(Lmh/g;)Lhh/h;

    move-result-object p0

    return-object p0
.end method

.method public static final t(Ljava/util/concurrent/atomic/AtomicInteger;Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Ljava/lang/Throwable;)Lhh/l;
    .locals 3

    const-string v0, "$counter"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "this$0"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "$watchFlag"

    invoke-static {p2, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "it"

    invoke-static {p3, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    instance-of v0, p3, Lcom/miui/mediaeditor/download/exception/DownloadException;

    if-eqz v0, :cond_2

    .line 2
    move-object v0, p3

    check-cast v0, Lcom/miui/mediaeditor/download/exception/DownloadException;

    invoke-virtual {v0}, Lcom/miui/mediaeditor/download/exception/DownloadException;->getError()Lcom/miui/mediaeditor/download/exception/DownloadException$a;

    move-result-object v1

    instance-of v1, v1, Lcom/miui/mediaeditor/download/exception/DownloadException$a$d;

    if-nez v1, :cond_0

    invoke-virtual {v0}, Lcom/miui/mediaeditor/download/exception/DownloadException;->getError()Lcom/miui/mediaeditor/download/exception/DownloadException$a;

    move-result-object v0

    instance-of v0, v0, Lcom/miui/mediaeditor/download/exception/DownloadException$a$g;

    if-eqz v0, :cond_2

    .line 3
    :cond_0
    invoke-virtual {p0}, Ljava/util/concurrent/atomic/AtomicInteger;->getAndIncrement()I

    move-result v0

    iget-object v1, p1, Ldf/j;->g:Laf/a;

    invoke-virtual {v1}, Laf/a;->b()I

    move-result v1

    if-ge v0, v1, :cond_2

    .line 4
    iget-boolean p3, p2, Lkotlin/jvm/internal/Ref$BooleanRef;->element:Z

    if-eqz p3, :cond_1

    .line 5
    invoke-virtual {p1}, Ldf/j;->n()Lgf/b;

    move-result-object p3

    invoke-interface {p3, p1}, Lgf/b;->b(Ldf/j;)V

    const/4 p3, 0x0

    .line 6
    iput-boolean p3, p2, Lkotlin/jvm/internal/Ref$BooleanRef;->element:Z

    .line 7
    :cond_1
    invoke-virtual {p1}, Ldf/j;->l()Lbf/b;

    move-result-object p2

    invoke-virtual {p1}, Ldf/j;->m()Ldf/a;

    move-result-object p3

    invoke-virtual {p3}, Ldf/a;->c()Ljava/lang/String;

    move-result-object p3

    new-instance v0, Ljava/lang/StringBuilder;

    invoke-direct {v0}, Ljava/lang/StringBuilder;-><init>()V

    const-string v1, "delay retry "

    invoke-virtual {v0, v1}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {p0}, Ljava/util/concurrent/atomic/AtomicInteger;->get()I

    move-result p0

    invoke-virtual {v0, p0}, Ljava/lang/StringBuilder;->append(I)Ljava/lang/StringBuilder;

    const-string p0, " times by "

    invoke-virtual {v0, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object p0, p1, Ldf/j;->g:Laf/a;

    invoke-virtual {p0}, Laf/a;->a()J

    move-result-wide v1

    invoke-virtual {v0, v1, v2}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string p0, " ms"

    invoke-virtual {v0, p0}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v0}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p0

    invoke-interface {p2, p3, p0}, Lbf/b;->c(Ljava/lang/String;Ljava/lang/String;)V

    .line 8
    iget-object p0, p1, Ldf/j;->g:Laf/a;

    invoke-virtual {p0}, Laf/a;->a()J

    move-result-wide p0

    sget-object p2, Ljava/util/concurrent/TimeUnit;->MILLISECONDS:Ljava/util/concurrent/TimeUnit;

    invoke-static {p0, p1, p2}, Lhh/h;->U(JLjava/util/concurrent/TimeUnit;)Lhh/h;

    move-result-object p0

    goto :goto_0

    .line 9
    :cond_2
    invoke-static {p3}, Lhh/h;->v(Ljava/lang/Throwable;)Lhh/h;

    move-result-object p0

    :goto_0
    return-object p0
.end method

.method public static final u(Ldf/j;Ljava/lang/Throwable;)V
    .locals 2

    const-string v0, "this$0"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    invoke-virtual {p0}, Ldf/j;->m()Ldf/a;

    move-result-object v0

    invoke-static {v0}, Lef/c;->a(Ldf/a;)V

    .line 2
    invoke-virtual {p0}, Ldf/j;->l()Lbf/b;

    move-result-object v0

    invoke-virtual {p0}, Ldf/j;->m()Ldf/a;

    move-result-object p0

    invoke-virtual {p0}, Ldf/a;->c()Ljava/lang/String;

    move-result-object p0

    const-string v1, "it"

    invoke-static {p1, v1}, Lri/h;->e(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v1, "crash happened!"

    invoke-interface {v0, p0, v1, p1}, Lbf/b;->b(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V

    return-void
.end method

.method public static final v(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Lkotlin/jvm/internal/Ref$LongRef;)V
    .locals 5

    const-string v0, "$startTime"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "this$0"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "$totalLength"

    invoke-static {p2, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    invoke-static {}, Ljava/lang/System;->currentTimeMillis()J

    move-result-wide v0

    iget-wide v2, p0, Lkotlin/jvm/internal/Ref$LongRef;->element:J

    sub-long/2addr v0, v2

    .line 2
    invoke-virtual {p1}, Ldf/j;->l()Lbf/b;

    move-result-object p0

    invoke-virtual {p1}, Ldf/j;->m()Ldf/a;

    move-result-object p1

    invoke-virtual {p1}, Ldf/a;->c()Ljava/lang/String;

    move-result-object p1

    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "\n----------\n    download success!\n    [total length]: "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 3
    iget-wide v3, p2, Lkotlin/jvm/internal/Ref$LongRef;->element:J

    invoke-static {v3, v4}, Lef/b;->b(J)Ljava/lang/String;

    move-result-object v3

    .line 4
    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    const-string v3, " \n    [total time]: "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2, v0, v1}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string v3, " ms \n    [average speed]:"

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    .line 5
    iget-wide v3, p2, Lkotlin/jvm/internal/Ref$LongRef;->element:J

    div-long/2addr v3, v0

    .line 6
    invoke-virtual {v2, v3, v4}, Ljava/lang/StringBuilder;->append(J)Ljava/lang/StringBuilder;

    const-string p2, " kps\n----------\n"

    invoke-virtual {v2, p2}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object p2

    invoke-interface {p0, p1, p2}, Lbf/b;->c(Ljava/lang/String;Ljava/lang/String;)V

    return-void
.end method

.method public static final w(Lkotlin/jvm/internal/Ref$BooleanRef;Ldf/j;)V
    .locals 1

    const-string v0, "$watchFlag"

    invoke-static {p0, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    const-string v0, "this$0"

    invoke-static {p1, v0}, Lri/h;->f(Ljava/lang/Object;Ljava/lang/String;)V

    .line 1
    iget-boolean p0, p0, Lkotlin/jvm/internal/Ref$BooleanRef;->element:Z

    if-eqz p0, :cond_0

    .line 2
    invoke-virtual {p1}, Ldf/j;->n()Lgf/b;

    move-result-object p0

    invoke-interface {p0, p1}, Lgf/b;->b(Ldf/j;)V

    :cond_0
    return-void
.end method


# virtual methods
.method public final i()Lze/b;
    .locals 0

    .line 1
    iget-object p0, p0, Ldf/j;->d:Lze/b;

    return-object p0
.end method

.method public final j()Lcf/a;
    .locals 0

    .line 1
    iget-object p0, p0, Ldf/j;->e:Lcf/a;

    return-object p0
.end method

.method public final k()Ljava/util/Map;
    .locals 0
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Ljava/util/Map<",
            "Ljava/lang/String;",
            "Ljava/lang/String;",
            ">;"
        }
    .end annotation

    .line 1
    iget-object p0, p0, Ldf/j;->b:Ljava/util/Map;

    return-object p0
.end method

.method public final l()Lbf/b;
    .locals 0

    .line 1
    iget-object p0, p0, Ldf/j;->i:Lbf/b;

    return-object p0
.end method

.method public final m()Ldf/a;
    .locals 0

    .line 1
    iget-object p0, p0, Ldf/j;->a:Ldf/a;

    return-object p0
.end method

.method public final n()Lgf/b;
    .locals 0

    .line 1
    iget-object p0, p0, Ldf/j;->h:Lgf/b;

    return-object p0
.end method

.method public final o()Lhh/h;
    .locals 5
    .annotation system Ldalvik/annotation/Signature;
        value = {
            "()",
            "Lhh/h<",
            "Lcom/miui/mediaeditor/download/Progress;",
            ">;"
        }
    .end annotation

    .line 1
    iget-object v0, p0, Ldf/j;->i:Lbf/b;

    iget-object v1, p0, Ldf/j;->a:Ldf/a;

    invoke-virtual {v1}, Ldf/a;->c()Ljava/lang/String;

    move-result-object v1

    new-instance v2, Ljava/lang/StringBuilder;

    invoke-direct {v2}, Ljava/lang/StringBuilder;-><init>()V

    const-string v3, "start with retry config "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v3, p0, Ldf/j;->g:Laf/a;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const/16 v3, 0x20

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(C)Ljava/lang/StringBuilder;

    iget-object v3, p0, Ldf/j;->a:Ldf/a;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v3, " \nwith scheduler"

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v3, p0, Ldf/j;->j:Lhh/n;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    const-string v3, " \nPriorityScheduler "

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/String;)Ljava/lang/StringBuilder;

    iget-object v3, p0, Ldf/j;->f:Lye/a;

    invoke-virtual {v2, v3}, Ljava/lang/StringBuilder;->append(Ljava/lang/Object;)Ljava/lang/StringBuilder;

    invoke-virtual {v2}, Ljava/lang/StringBuilder;->toString()Ljava/lang/String;

    move-result-object v2

    invoke-interface {v0, v1, v2}, Lbf/b;->c(Ljava/lang/String;Ljava/lang/String;)V

    .line 2
    new-instance v0, Lkotlin/jvm/internal/Ref$BooleanRef;

    invoke-direct {v0}, Lkotlin/jvm/internal/Ref$BooleanRef;-><init>()V

    .line 3
    new-instance v1, Lkotlin/jvm/internal/Ref$LongRef;

    invoke-direct {v1}, Lkotlin/jvm/internal/Ref$LongRef;-><init>()V

    .line 4
    new-instance v2, Lkotlin/jvm/internal/Ref$LongRef;

    invoke-direct {v2}, Lkotlin/jvm/internal/Ref$LongRef;-><init>()V

    .line 5
    iget-object v3, p0, Ldf/j;->a:Ldf/a;

    invoke-static {v3}, Lhh/h;->H(Ljava/lang/Object;)Lhh/h;

    move-result-object v3

    .line 6
    iget-object v4, p0, Ldf/j;->j:Lhh/n;

    invoke-virtual {v3, v4}, Lhh/h;->J(Lhh/n;)Lhh/h;

    move-result-object v3

    .line 7
    new-instance v4, Ldf/i;

    invoke-direct {v4, v1, p0}, Ldf/i;-><init>(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;)V

    invoke-virtual {v3, v4}, Lhh/h;->y(Lmh/g;)Lhh/h;

    move-result-object v3

    .line 8
    new-instance v4, Ldf/e;

    invoke-direct {v4, p0, v0, v2}, Ldf/e;-><init>(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;Lkotlin/jvm/internal/Ref$LongRef;)V

    invoke-virtual {v3, v4}, Lhh/h;->s(Lmh/f;)Lhh/h;

    move-result-object v3

    .line 9
    new-instance v4, Ldf/f;

    invoke-direct {v4, p0}, Ldf/f;-><init>(Ldf/j;)V

    invoke-virtual {v3, v4}, Lhh/h;->y(Lmh/g;)Lhh/h;

    move-result-object v3

    .line 10
    new-instance v4, Ldf/g;

    invoke-direct {v4, p0, v0}, Ldf/g;-><init>(Ldf/j;Lkotlin/jvm/internal/Ref$BooleanRef;)V

    invoke-virtual {v3, v4}, Lhh/h;->L(Lmh/g;)Lhh/h;

    move-result-object v3

    .line 11
    new-instance v4, Ldf/d;

    invoke-direct {v4, p0}, Ldf/d;-><init>(Ldf/j;)V

    invoke-virtual {v3, v4}, Lhh/h;->q(Lmh/f;)Lhh/h;

    move-result-object v3

    .line 12
    new-instance v4, Ldf/c;

    invoke-direct {v4, v1, p0, v2}, Ldf/c;-><init>(Lkotlin/jvm/internal/Ref$LongRef;Ldf/j;Lkotlin/jvm/internal/Ref$LongRef;)V

    invoke-virtual {v3, v4}, Lhh/h;->n(Lmh/a;)Lhh/h;

    move-result-object v1

    .line 13
    new-instance v2, Ldf/b;

    invoke-direct {v2, v0, p0}, Ldf/b;-><init>(Lkotlin/jvm/internal/Ref$BooleanRef;Ldf/j;)V

    invoke-virtual {v1, v2}, Lhh/h;->m(Lmh/a;)Lhh/h;

    move-result-object p0

    const-string v0, "just(task)\n            .observeOn(scheduler)\n            .flatMap {\n                startTime = System.currentTimeMillis()\n                getRequest.get(task.url, header)\n            }\n            .doOnNext{\n                if (!it.isSuccessful) {\n                    if (it.isTimeOut()) {\n                        throw DownloadException(\"request time out, worth to retry\", DownloadException.ERROR.HttpTimeOut)\n                    } else if (it.isServerError()) {\n                        throw DownloadException(\"request server error\", DownloadException.ERROR.HttpServerError)\n                    } else {\n                        throw DownloadException(\"request failed!\", DownloadException.ERROR.HttpError)\n                    }\n                }\n\n                try {\n                    //Watch task, should be done when the task\n                    //has save path and save name.\n                    watcher.watch(this)\n                    watchFlag = true\n                } catch (e: Throwable) {\n                    logger.e(task.taskName, \"watcher catch throwable\", e);\n                    throw e\n                }\n                totalLength = it.contentLength()\n            }\n            .flatMap {\n                dispatcher.dispatch(task, it).download(this, it)\n            }\n            .retryWhen{ it ->\n                val counter = AtomicInteger()\n                it.flatMap{\n                    if ((it is DownloadException)\n                        && (it.error is DownloadException.ERROR.HttpTimeOut || it.error is DownloadException.ERROR.UNKNOWN)\n                        && (counter.getAndIncrement() < retryConfig.maxRetries)) {\n\n                        if (watchFlag) {\n                            watcher.unwatch(this)\n                            watchFlag = false\n                        }\n                        logger.d(task.taskName,\"delay retry ${counter.get()} times by ${retryConfig.delay} ms\")\n                        Observable.timer(retryConfig.delay, TimeUnit.MILLISECONDS)\n                    } else {\n                        Observable.error(it)\n                    }\n                }\n            }\n            .doOnError {\n                task.cancel()\n                logger.e(task.taskName, \"crash happened!\", it)\n            }\n            .doOnComplete {\n                val totalTime = (System.currentTimeMillis() - startTime)\n                logger.d(task.taskName,\"\\n----------\\n\" +\n                        \"    download success!\\n\" +\n                        \"    [total length]: ${totalLength.formatSize()} \\n\" +\n                        \"    [total time]: $totalTime ms \\n\" +\n                        \"    [average speed]:${totalLength/totalTime} kps\" +\n                        \"\\n----------\\n\")\n            }\n            .doFinally {\n                if (watchFlag) {\n                    watcher.unwatch(this)\n                }\n            }"

    invoke-static {p0, v0}, Lri/h;->e(Ljava/lang/Object;Ljava/lang/String;)V

    return-object p0
.end method
